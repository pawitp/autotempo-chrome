<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>Mocha Spec Runner</title>
  <link rel="stylesheet" href="../bower_components/mocha/mocha.css">
</head>
<body>
  <div id="mocha"></div>
  <script src="../bower_components/mocha/mocha.js"></script>
  <script>mocha.setup('bdd');</script>
  <script src="../bower_components/chai/chai.js"></script>
  <script src="../bower_components/chai-as-promised/lib/chai-as-promised.js"></script>
  <script src="../bower_components/sinon-chai/lib/sinon-chai.js"></script>
  <script src="../bower_components/sinonjs/sinon.js"></script>
  <script>
    var assert = chai.assert;
    var expect = chai.expect;
    var should = chai.should();
  </script>
  <!-- bower:js -->
  <script src="../bower_components/angular/angular.js"></script>
  <script src="../bower_components/angular-bootstrap/ui-bootstrap-tpls.js"></script>
  <script src="../bower_components/ngQueue/ngQueue.js"></script>
  <!-- endbower -->
  <script src="../bower_components/angular-mocks/angular-mocks.js"></script>
  <!-- include source files here... -->
  <script src="../scripts/app.js"></script>
  <script src="../scripts/configService.js"></script>
  <script src="../scripts/jiraService.js"></script>
  <script src="../scripts/exchangeService.js"></script>
  <script src="../scripts/utils.js"></script>
  <!-- include spec files here... -->
  <script src="spec/configServiceTest.js"></script>
  <script src="spec/exchangeServiceTest.js"></script>
  <script src="spec/jiraServiceTest.js"></script>
  <script src="spec/utilsTest.js"></script>
  <script>
    if (navigator.userAgent.indexOf('PhantomJS') === -1) {
      mocha.run();
    } else {
      // Synchronouisly load special shims for PhantomJS
      // (we don't want to load them when running on Chrome
      // since the shims aren't used in production)
      function loadScript(url) {
        var xhr = new XMLHttpRequest();
        xhr.open('GET', url, false);
        xhr.send('');

        var s = document.createElement('script');
        s.text = xhr.responseText;
        document.getElementsByTagName('head')[0].appendChild(s);
      }

      loadScript("../bower_components/es5-shim/es5-shim.js");
      loadScript("../bower_components/es6-shim/es6-shim.js");
    }
  </script>
</body>
</html>
